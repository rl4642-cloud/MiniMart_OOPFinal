@startuml MiniMart Sequence Diagram - Display Total Profit

title MiniMart - Display Total Profit Sequence Diagram

actor "Store Manager" as Manager
participant "MiniMart" as MiniMart
participant "Product" as Product
participant "Transaction" as Transaction
participant "ArrayList<Transaction>" as TransactionList
participant "Scanner" as Scanner
participant "System.out" as Console

== Display Total Profit Flow ==
Manager -> MiniMart: select option (2) from main menu
activate MiniMart
MiniMart -> MiniMart: displayTotalProfit()
activate MiniMart

== Initialize Calculation ==
MiniMart -> MiniMart: totalProfit = 0.0
MiniMart -> MiniMart: saleCount = 0

== Calculate Profit ==
loop for each transaction
    MiniMart -> Transaction: getType()
    Transaction --> MiniMart: TransactionType
    
    alt transaction type is SALE
        MiniMart -> Transaction: getProductId()
        Transaction --> MiniMart: productId (int)
        
        MiniMart -> MiniMart: findProductById(productId)
        MiniMart --> MiniMart: Product
        
        MiniMart -> Product: getPurchasePrice()
        Product --> MiniMart: purchasePrice (double)
        
        MiniMart -> Transaction: getQuantity()
        Transaction --> MiniMart: quantity (int)
        
        MiniMart -> Transaction: getUnitPrice()
        Transaction --> MiniMart: sellingPrice (double)
        
        MiniMart -> MiniMart: profit = (sellingPrice - purchasePrice) * quantity
        MiniMart -> MiniMart: totalProfit += profit
        MiniMart -> MiniMart: saleCount++
    end
end

== Display Report ==
MiniMart -> Console: print separator line
MiniMart -> Console: print "Total Number of Sales: " + saleCount
MiniMart -> Console: print "Total Profit: $" + totalProfit
MiniMart -> Console: print separator line

alt saleCount > 0
    MiniMart -> Console: print "Sale Transactions:"
    MiniMart -> Console: print table header
    
    loop for each transaction
        MiniMart -> Transaction: getType()
        Transaction --> MiniMart: TransactionType
        alt type is SALE
            MiniMart -> Transaction: displayTransaction()
            activate Transaction
            Transaction -> Console: printf(transactionId, type, productId, name, quantity, price, total)
            deactivate Transaction
        end
    end
end

MiniMart -> Console: print "Press Enter to continue"
MiniMart -> Scanner: nextLine() - wait for Enter
MiniMart --> Manager: return to main menu
deactivate MiniMart
deactivate MiniMart

@enduml

