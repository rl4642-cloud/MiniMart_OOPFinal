@startuml MiniMart Sequence Diagram - Add Product

title MiniMart - Add Product Sequence Diagram

actor "Store Manager" as Manager
participant "MiniMart" as MiniMart
participant "Product" as Product
participant "ArrayList<Product>" as ProductList
participant "Scanner" as Scanner
database "File System" as Files
participant "System.out" as Console

== Add Product Flow ==
Manager -> MiniMart: select option (1) from submenu
activate MiniMart
MiniMart -> MiniMart: addProduct()
activate MiniMart
MiniMart -> Console: print "Add a new product window"

== Get User Input ==
Manager -> MiniMart: enter product name
MiniMart -> Scanner: nextLine()
Scanner --> MiniMart: name (String)

Manager -> MiniMart: enter purchase price
MiniMart -> Scanner: nextLine()
Scanner --> MiniMart: priceString (String)
MiniMart -> MiniMart: Double.parseDouble(priceString)
MiniMart --> MiniMart: purchasePrice (double)

Manager -> MiniMart: enter selling price
MiniMart -> Scanner: nextLine()
Scanner --> MiniMart: priceString (String)
MiniMart -> MiniMart: Double.parseDouble(priceString)
MiniMart --> MiniMart: sellingPrice (double)

MiniMart -> MiniMart: stockQuantity = 0

Manager -> MiniMart: enter low stock threshold
MiniMart -> Scanner: nextLine()
Scanner --> MiniMart: thresholdString (String)
MiniMart -> MiniMart: Integer.parseInt(thresholdString)
MiniMart --> MiniMart: lowStockThreshold (int)

== Create Product ==
MiniMart -> Product: new Product(name, purchasePrice, sellingPrice, 0, threshold)
activate Product
Product -> Product: nextId++
Product -> Product: assign id = nextId
Product -> Product: productCount++
Product --> MiniMart: new Product instance
deactivate Product

== Save Product ==
MiniMart -> ProductList: add(newProduct)
MiniMart -> MiniMart: saveProducts()
activate MiniMart
MiniMart -> Files: new ObjectOutputStream(PRODUCTS_FILE)
MiniMart -> Files: writeInt(products.size())
MiniMart -> Files: writeInt(Product.getNextId())
loop for each product
    MiniMart -> Files: writeObject(product)
end
MiniMart -> Files: flush()
MiniMart -> Files: close()
deactivate MiniMart

== Confirmation ==
MiniMart -> Console: print "Product added successfully!"
MiniMart -> Scanner: nextLine() - wait for Enter
MiniMart --> Manager: return to inventory overview
deactivate MiniMart
deactivate MiniMart

@enduml

