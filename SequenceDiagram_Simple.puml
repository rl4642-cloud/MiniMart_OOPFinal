@startuml MiniMart Sequence Diagram - Simple Version

title MiniMart - Sequence Diagram (Simplified)

actor "Store Manager" as Manager
participant "MiniMart" as MiniMart
participant "Product" as Product
participant "Transaction" as Transaction
database "File System" as Files

== System Initialization ==
Manager -> MiniMart: start application
MiniMart -> Files: load products.bin
Files --> MiniMart: products
MiniMart -> Files: load transactions.bin
Files --> MiniMart: transactions

== Display Inventory Overview ==
Manager -> MiniMart: Display inventory overview
activate MiniMart
MiniMart -> Product: get product info
loop for each product
    Product --> MiniMart: product details
end
MiniMart -> MiniMart: check low stock
MiniMart --> Manager: display inventory + submenu
deactivate MiniMart

== Add Product Flow ==
Manager -> MiniMart: Add product
activate MiniMart
Manager -> MiniMart: product details
MiniMart -> Product: new Product(...)
Product --> MiniMart: product created
MiniMart -> Files: saveProducts()
MiniMart --> Manager: success message
deactivate MiniMart

== Record Purchase Flow ==
Manager -> MiniMart: Record purchase
activate MiniMart
Manager -> MiniMart: product ID + quantity
MiniMart -> Product: increaseStock(quantity)
Product --> MiniMart: stock updated
MiniMart -> Transaction: new Transaction(PURCHASE)
Transaction --> MiniMart: transaction created
MiniMart -> Files: saveProducts() + saveTransactions()
MiniMart --> Manager: purchase recorded
deactivate MiniMart

== Record Sale Flow ==
Manager -> MiniMart: Record sale
activate MiniMart
Manager -> MiniMart: product ID + quantity
MiniMart -> Product: getStockQuantity()
Product --> MiniMart: current stock
alt sufficient stock
    MiniMart -> Product: decreaseStock(quantity)
    MiniMart -> MiniMart: calculate profit
    MiniMart -> Transaction: new Transaction(SALE)
    MiniMart -> Files: saveProducts() + saveTransactions()
    MiniMart --> Manager: sale recorded
else insufficient stock
    MiniMart --> Manager: error message
end
deactivate MiniMart

== Display Profit Report Flow ==
Manager -> MiniMart: Display profit report
activate MiniMart
loop for each sale transaction
    MiniMart -> Transaction: get transaction details
    MiniMart -> Product: getPurchasePrice()
    MiniMart -> MiniMart: calculate profit
end
MiniMart -> MiniMart: sum total profit
MiniMart --> Manager: profit report
deactivate MiniMart

@enduml

